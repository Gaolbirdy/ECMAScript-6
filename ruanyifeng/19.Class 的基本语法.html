<script>
const { log } = console;
</script>

<!-- <script>
    function f(){
        return 1;
    }

    log(f(), typeof f());
    log(new f(), typeof new f());
</script> -->

<!-- <script>
    // function Point(x, y){
    //     this.x = x;
    //     this.y = y;

    //     log(this, typeof this);
    // }

    // Point(1, 2);
    // log(this.x, window.y);

    // new Point(1, 2);
    // log(this.x, window.y);

    // function Point(x, y){
    //     this.x = x;
    //     this.y = y;

    //     // return {z: 500};
    //     // return this;
    // }

    // Point.prototype.toString = function() {
    //     return '(' + this.x + ', ' + this.y + ')';
    // };

    // var p = new Point(1, 2);
    // log(p);
    // log(p.toString());

    // class Bar {
    //     doStuff() {
    //         log('stuff');
    //     }
    // }

    // var b = new Bar();
    // b.doStuff();

    // class Point {
    //     constructor(x, y) {
    //         this.x = x;
    //         this.y = y;
    //     }

    //     toString() {
    //         return '(' + this.x + ', ' + this.y + ')';
    //     }

    //     toValue() {

    //     }
    // }
    
    // log(typeof Point);
    // log(Point.prototype.constructor);
    // log(Point === Point.prototype.constructor);

    // function Point() {

    // }

    // Point.prototype = {
    //     constructor() {},
    //     toString() {},
    //     toValue() {},
    // };

    // log(Point.prototype);

    // class B {}
    // let b = new B();
    // log(b.constructor === B.prototype.constructor);

    // class Point {
    //     constructor() {

    //     }
    // }

    // Object.assign(Point.prototype, {
    //     toString() {},
    //     toValue() {}
    // });

    // log(Point.prototype);
    // log(Point.prototype.constructor === Point);

    // log(Object.keys(Point.prototype));
    // log(Object.getOwnPropertyNames(Point.prototype));

    // var Point = function(x, y) {

    // };

    // Point.prototype.toString = function() {

    // };

    // log(Object.keys(Point.prototype));
    // log(Object.getOwnPropertyNames(Point.prototype));

    let methodName = 'getArea';

    class Square {
        constructor(length) {

        }

        [methodName]() {
            log(1);
        }
    }
    new Square()[methodName]();
    new Square().getArea();
    new Square()['getArea']();
</script> -->

<!-- <script>
    // class Point {

    // }
    // class Point {
    //     constructor() {}
    // }

    class Foo {
        constructor() {
            return Object.create(null);
        }
    }

    log(new Foo());
    log(new Foo() instanceof Foo);
</script> -->

<!-- <script>
    // class Point {

    // }

    // // var point = Point(2, 3);
    // var point = new Point(2, 3);
    // log(point);

    class Point {

        constructor(x, y) {
            this.x = x;
            this.y = y;
        }

        toString() {
            return '(' + this.x + ', ' + this.y + ')';
        }
    }

    var point = new Point(2, 3);

    log(point.toString());

    log(point.hasOwnProperty('x'));
    log(point.hasOwnProperty('y'));
    log(point.hasOwnProperty('toString'));

    log(Point.prototype.hasOwnProperty('x'));
    log(Point.prototype.hasOwnProperty('toString'));

    log(point.__proto__.hasOwnProperty('x'));
    log(point.__proto__.hasOwnProperty('toString'));

    log(point.__proto__ === Point.prototype);

    var p1 = new Point(2, 3);
    var p2 = new Point(3, 2);
    log(p1.__proto__ === p2.__proto__);

    p1.__proto__.printName = function() { return 'Oops'};

    log(p1.printName());
    log(p2.printName());

    var p3 = new Point();
    log(p3.printName());
</script> -->

<!-- <script>
    // class MyClass {
    //     getClassName() {
    //         return MyClass.name;
    //     }
    // }

    // let o = new MyClass();
    // log(o.getClassName());
    // log(MyClass.name);

    // const MyClass = class Me {
    //     getClassName() {
    //         return Me.name;
    //     }
    // }

    // let inst = new MyClass();
    // log(inst.getClassName());
    // // log(Me.name);
    // log(MyClass.name);

    // const MyClass = class {};
    // log(MyClass.name);

    let person = new class {
        constructor(name) {
            this.name = name;
        }

        sayName() {
            log(this.name);
        }
    }('张三');

    person.sayName();
</script> -->

<!-- <script>
    // new Foo();
    // class Foo {}
    
    let Foo = class {};
    class Bar extends Foo {
        
    }
</script> -->

<!-- <script>
    // class Widget {

    //     // 公有方法
    //     foo(baz) {
    //         this._bar(baz);
    //     }

    //     // 私有方法
    //     _bar(baz) {
    //         return this.snaf = baz;
    //     }
    // }

    // class Widget {
    //     foo(baz) {
    //         bar.call(this, baz);
    //     }
    // }

    // function bar(baz) {
    //     return this.snaf = baz;
    // }

    // const bar = Symbol('bar');
    // const snaf = Symbol('snaf');
    // const x = 's'

    // class MyClass {
    //     foo(baz) {
    //         this[bar](baz);
    //     }

    //     [bar](baz) {
    //         return this[snaf] = baz;
    //     }

    //     [x]() {
    //         log('hello');
    //     }
    // }

    // let w = new MyClass();
    // w.foo(2);
    // log(w);
    // w[x]();



</script> -->

<!-- <script>
    // class Logger {
    //     constructor() {
    //         this.printName = this.printName.bind(this);
    //     }

    //     printName(name = 'there') {
    //         log(this);
    //         this.print(`hello ${name}`);
    //     }

    //     print(text) {
    //         log(text);
    //     }
    // }

    // class Logger {
    //     constructor() {
    //         this.printName = (name = 'there') => {
    //             this.print(`Hello ${name}`);
    //         }
    //     }

    //     print(text) {
    //         log(text);
    //     }
    // }

    // const logger = new Logger();
    // const { printName } = logger;
    // printName();

    class Logger {
    printName(name = 'there') {
        this.print(`Hello ${name}`);
    }

    print(text) {
        console.log(text);
    }
    }

    function selfish(target) {
        const cache = new WeakMap();
        const handler = {
            get (target, key) {
                const value = Reflect.get(target, key);
                if(typeof value !== 'function') {
                    return value;
                }
                if(!cache.has(value)) {
                    cache.set(value, value.bind(target));
                }
                return cache.get(value);
            }
        };
        const proxy = new Proxy(target, handler);
        return proxy;
    }

    const logger = selfish(new Logger());

    const { printName } = logger;
    printName();
</script> -->

<!-- <script>
    class Point {}
    log(Point.name);
</script> -->

<!-- <script>
    // class MyClass {
    //     constructor() {

    //     }

    //     get prop() {
    //         return 'getter';
    //     }

    //     set prop(value) {
    //         log('setter: ' + value);
    //     }
    // }

    // let inst = new MyClass();
    // inst.prop = 123;
    // log(inst.prop);

    class CustomHTMLElement {
        constructor(element) {
            this.element = element;
        }

        get html() {
            return this.element.innerHTML;
        }

        set html(value) {
            this.element.innerHTML = value;
        }
    }

    var descriptor = Object.getOwnPropertyDescriptor(CustomHTMLElement.prototype, 'html');

    log('get' in descriptor);
    log('set' in descriptor);
</script> -->

<!-- <script>
    class Foo {
        constructor(...args) {
            this.args = args;
        }

        *[Symbol.iterator]() {
            for(let arg of this.args) {
                yield arg;
            }
        }
    }

    for(let x of new Foo('hello', 'world')) {
        log(x);
    }
</script> -->

<!-- <script>
    // class Foo {
    //     static classMethod() {
    //         return 'hello';
    //     }
    // }

    // log(Foo.classMethod());

    // var foo = new Foo();
    // log(foo.classMethod);
    // foo.classMethod();

    // class Foo {
    //     static bar() {
    //         this.baz();
    //         Foo.baz();
    //     }

    //     static baz() {
    //         log('hello');
    //     }

    //     baz() {
    //         log('world');
    //     }
    // }

    // Foo.bar();

    // class Foo {
    //     static classMethod() {
    //         return 'hello';
    //     }
    // }

    // class Bar extends Foo {

    // }

    // log(Bar.classMethod());

    class Foo {
        static classMethod() {
            return 'hello';
        }
    }

    class Bar extends Foo {
        static method() {
            return super.classMethod() + ', too';
        }
    }

    log(Bar.method());
</script> -->

<!-- <script>
    // class Foo {}

    // Foo.prop = 1;
    // log(Foo.prop);

    // class Foo {
    //     static prop: 2
    // }

    // class ReactCounter extends React.Component {
    //     constructor(props) {
    //         super(props);
    //         this.stat = {
    //             count: 0
    //         };
    //     }
    // }
</script> -->

<script>
    // function Person(name) {
    //     if(new.target !== undefined) {
    //         this.name = name;
    //         log(new.target);
    //     }
    //     else{
    //         throw new Error('必须使用 new 命令生成实例');
    //     }
    // }

    // function Person(name) {
    //     if(new.target === Person) {
    //         this.name = name;
    //         log(new.target);
    //     }
    //     else{
    //         log(new.target);
    //         throw new Error('必须使用 new 命令生成实例');
    //     }
    // }
    
    // var person = new Person('张三'); 
    // var notAPerson = Person.call(person, '张三'); 

    // class Rectangle {
    //     constructor(length, width) {
    //         log(new.target === Rectangle);
    //         log(new.target);
    //         this.length = length;
    //         this.width = width;
    //     }
    // }

    // // var obj = new Rectangle(3, 4);

    // class Square extends Rectangle {
    //     constructor(length) {
    //         super(length, length);
    //     }
    // }

    // var obj = new Square(3);

    class Shape {
        constructor() {
            if(new.target === Shape) {
                throw new Error('本类不能实例化');
            }
        }
    }

    class Rectangle extends Shape {
        constructor(length, width) {
            super();
        }
    }

    // var x = new Shape();
    var y = new Rectangle(3, 4);

    log(new.target);
</script>